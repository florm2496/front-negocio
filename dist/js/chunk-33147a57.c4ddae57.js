(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33147a57"],{"0977":function(t,o,e){"use strict";e.r(o);var r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-row",{staticClass:"justify-content-md-center"},[e("b-col",{attrs:{cols:"3"}},[e("b-form-group",{attrs:{id:"input-group-1",label:"Fecha de hoy","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",disabled:"",required:""},model:{value:t.current_date,callback:function(o){t.current_date=o},expression:"current_date"}})],1)],1),e("b-col",{attrs:{cols:"3"}},[e("b-form-group",{attrs:{id:"input-group-1",label:"Total","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",disabled:"",required:""},model:{value:t.total,callback:function(o){t.total=o},expression:"total"}})],1)],1)],1),e("b-row",{staticClass:"justify-content-md-center",staticStyle:{"margin-top":"15px"}},[e("b-col",{attrs:{cols:"6"}},[e("b-form-textarea",{attrs:{id:"observacion",placeholder:"Observacion sobre la compra",rows:"3","max-rows":"6"},model:{value:t.observacion,callback:function(o){t.observacion=o},expression:"observacion"}})],1)],1),e("b-row",{staticClass:"justify-content-md-center",staticStyle:{"margin-top":"15px"}},[e("b-col",{attrs:{cols:"3"}},[e("b-button",{attrs:{size:"sm"},on:{click:function(o){return t.guardar_ingresos()}}},[e("b-icon",{attrs:{icon:"x"}}),t._v("Guardar")],1)],1)],1),e("b-container",{staticClass:"form-container",attrs:{fluid:""}},[e("b-row",[e("b-col",{staticClass:"mr-auto p-1",attrs:{cols:"2"}},[e("label",{attrs:{for:""}},[t._v("Detalles de productos")])]),e("b-col",{staticClass:"mr-auto p-1",attrs:{cols:"2"}},[e("label",{attrs:{for:""}},[t._v("Precio")])]),e("b-col",{staticClass:"mr-auto p-1",attrs:{cols:"2"}},[e("label",{attrs:{for:""}},[t._v("Cantidad")])]),e("b-row",[e("b-col",{staticClass:"mr-auto mb-auto p-3",attrs:{cols:"2"}},[e("b-form-input",{attrs:{placeholder:"Producto"},model:{value:t.producto.nombre,callback:function(o){t.$set(t.producto,"nombre",o)},expression:"producto.nombre"}})],1),e("b-col",{staticClass:"mr-auto p-3",attrs:{cols:"2"}},[e("b-form-input",{attrs:{placeholder:"Precio",disabled:""},model:{value:t.producto.precio,callback:function(o){t.$set(t.producto,"precio",o)},expression:"producto.precio"}})],1),e("b-col",{staticClass:"mr-auto p-3",attrs:{cols:"2"}},[e("b-form-input",{attrs:{placeholder:"Cantidad"},model:{value:t.cantidad,callback:function(o){t.cantidad=o},expression:"cantidad"}})],1),e("b-col",{staticClass:"mr-auto p-3",attrs:{cols:"1"}},[e("b-button",{on:{click:function(o){return t.abrirmodalproductos()}}},[e("b-icon",{attrs:{icon:"search"}})],1)],1),e("b-col",{staticClass:"mr-auto p-3",attrs:{cols:"1"}},[e("b-button",{attrs:{disabled:t.fileSizeValidation},on:{click:t.agregarproducto}},[e("b-icon",{attrs:{icon:"plus"}})],1)],1)],1),e("b-row")],1),e("b-row",[e("b-container",[e("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(name)",fn:function(o){return[t._v(" "+t._s(o.value.first)+" "+t._s(o.value.last)+" ")]}},{key:"cell(actions)",fn:function(o){return[e("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.eliminar(o.item,o.index)}}},[e("b-icon",{attrs:{icon:"x"}})],1)]}}])})],1)],1)],1),e("modal-tabla-productos",{ref:"modal_productos",on:{elegirproducto:t.productoseleccionado}})],1)},a=[],s=e("1da1"),n=(e("a434"),e("96cf"),e("416d")),i=e("d4ec"),c=e("bee2"),l=function(){function t(){Object(i["a"])(this,t)}return Object(c["a"])(t,[{key:"currentDateTime",value:function(){var t=new Date,o=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),e=o;return e}}]),t}(),u=new l,d=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("b-modal",{ref:"modal_productos",attrs:{id:"modal_productos",name:"modal_productos",size:"lg",title:"Productos","ok-only":""},scopedSlots:t._u([{key:"modal-header",fn:function(o){var r=o.close;return[e("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(t){return r()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]}}])},[e("b-container",{attrs:{fluid:""},scopedSlots:t._u([{key:"modal-footer",fn:function(){},proxy:!0}])},[e("b-row",[e("b-col",{staticStyle:{"margin-bottom":"30px","margin-top":"0px"},attrs:{lg:"6"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Escribe lo que quieras buscar"},model:{value:t.filter,callback:function(o){t.filter=o},expression:"filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.filter},on:{click:function(o){t.filter=""}}},[t._v("Buscar")])],1)],1)],1)],1)],1),e("b-table",{attrs:{items:t.datos,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,stacked:"md","show-empty":"",small:"",id:"tabla-productos"},on:{"update:sortBy":function(o){t.sortBy=o},"update:sort-by":function(o){t.sortBy=o},"update:sortDesc":function(o){t.sortDesc=o},"update:sort-desc":function(o){t.sortDesc=o},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(name)",fn:function(o){return[t._v(" "+t._s(o.value.first)+" "+t._s(o.value.last)+" ")]}},{key:"cell(actions)",fn:function(o){return[e("b-button",{staticClass:"action",attrs:{id:"editarproducto",size:"sm"},on:{click:function(e){return t.seleccionarproducto(o.item)}}},[e("b-icon",{attrs:{icon:"hand-thumbs-up"}})],1)]}}])}),e("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(o){t.currentPage=o},expression:"currentPage"}})],1)],1)],1)],1)},p=[],b=(e("d81d"),e("4de4"),{name:"ModalTablaProductos",data:function(){return{objetoproducto:null,datos:[],producto_id:"0",totalRows:1,currentPage:1,perPage:10,pageOptions:[5,10,15,{value:100,text:"Show a lot"}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],display:!1,consulta:null,resultdelete:"",accion:"",fields:[{key:"codigo",label:"Codigo",sortable:!0,class:"text-center"},{key:"nombre",label:"Nombre",sortable:!0,sortDirection:"desc"},{key:"precio",label:"Precio",sortable:!0,class:"text-center"},{key:"tipo",label:"Tipo",sortable:!0,class:"text-center"},{key:"actions",label:"Elegir"}],infoModal:{id:"info-modal",title:"",content:""}}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},created:function(){this.getproductos()},mounted:function(){this.totalRows=this.datos.length},methods:{getproductos:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var e;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n["a"].getProductos();case 2:e=o.sent,t.datos=e,t.display=!0;case 5:case"end":return o.stop()}}),o)})))()},showModal:function(){this.$refs["modal_productos"].show()},hideModal:function(){this.$refs["modal_productos"].hide()},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},sendproducto:function(t){var o=t;return o},getproducto:function(t){return this.objetoproducto=Object.assign({},t),this.objetoproducto},seleccionarproducto:function(t){this.$emit("elegirproducto",this.getproducto(t)),this.hideModal()},cargar:function(){this.productos()}}}),f=b,m=(e("8ed5"),e("2877")),h=Object(m["a"])(f,d,p,!1,null,null,null),g=h.exports,v={name:"NuevosIngresos",components:{ModalTablaProductos:g},data:function(){return{forms:1,show:!1,datos:null,prods:[],producto:{precio:0,nombre:"",codigo:0},cantidad:0,total:0,fields:[{key:"codigo",label:"Codigo"},{key:"producto",label:"Producto"},{key:"cantidad",label:"Cantidad"},{key:"precio",label:"Precio"},{key:"subtotal",label:"Subtotal"},{key:"actions",label:""}],items:[],cantidades:[],subtotales:[],productos:[],observacion:""}},computed:{fileSizeValidation:function(){var t=!0;return 0!=this.cantidad&&0!=this.producto.precio&&(t=!1),t}},created:function(){this.get_date()},mounted:function(){this.get_productos()},methods:{get_productos:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var e;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n["a"].getProductos();case 2:e=o.sent,t.datos=e,t.display=!0;case 5:case"end":return o.stop()}}),o)})))()},productoseleccionado:function(t){this.producto=t},abrirmodalproductos:function(){this.$refs.modal_productos.showModal()},agregar:function(){this.forms+=1;var t={producto:"",cantidad:"0",subtotal:"0"};this.productos.push(t)},agregarproducto:function(){var t=this.cantidad;this.aux_cantidad=t;var o=this.producto.precio,e=parseFloat(t)*parseFloat(o);this.subtotal=e;var r={codigo:this.producto.codigo,producto:this.producto.nombre,cantidad:t,precio:o,subtotal:e};this.productos.push(parseInt(this.producto.codigo)),this.subtotales.push(parseFloat(e)),this.cantidades.push(parseInt(t)),this.items.push(r),this.reset(),this.calculartotal()},calculartotal:function(){for(var t=this.items,o=0,e=0;e<t.length;e++){var r=o;o=r+parseFloat(t[e].subtotal)}this.total=o},guardar_ingresos:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var e,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e={observacion:t.observacion,total:t.total,cantidades:t.cantidades,productos:t.productos,subtotales:t.subtotales},o.prev=1,o.next=4,n["a"].nuevosIngresos(e);case 4:r=o.sent,console.log(r),200==r.status&&(t.$swal("Exito","Ingresos guardados","success"),t.$router.push("/ingresos")),o.next=12;break;case 9:o.prev=9,o.t0=o["catch"](1),t.$swal("Error",o.t0.message,"error");case 12:case"end":return o.stop()}}),o,null,[[1,9]])})))()},eliminar:function(t,o){for(var e=this.items,r=0;r<e.length;r++)if(e[r].producto==t.producto){var a=e[r].subtotal;this.items.splice(r,1),this.total=this.total-a;break}this.productos.splice(o,1),this.subtotales.splice(o,1),this.cantidades.splice(o,1)},reset:function(){this.producto.nombre="",this.producto.precio="",this.cantidad=""},get_date:function(){this.current_date=u.currentDateTime()}}},k=v,y=Object(m["a"])(k,r,a,!1,null,null,null);o["default"]=y.exports},8418:function(t,o,e){"use strict";var r=e("c04e"),a=e("9bf2"),s=e("5c6c");t.exports=function(t,o,e){var n=r(o);n in t?a.f(t,n,s(0,e)):t[n]=e}},"8ed5":function(t,o,e){"use strict";e("af89")},a434:function(t,o,e){"use strict";var r=e("23e7"),a=e("23cb"),s=e("a691"),n=e("50c4"),i=e("7b0b"),c=e("65f0"),l=e("8418"),u=e("1dde"),d=u("splice"),p=Math.max,b=Math.min,f=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(t,o){var e,r,u,d,h,g,v=i(this),k=n(v.length),y=a(t,k),w=arguments.length;if(0===w?e=r=0:1===w?(e=0,r=k-y):(e=w-2,r=b(p(s(o),0),k-y)),k+e-r>f)throw TypeError(m);for(u=c(v,r),d=0;d<r;d++)h=y+d,h in v&&l(u,d,v[h]);if(u.length=r,e<r){for(d=y;d<k-r;d++)h=d+r,g=d+e,h in v?v[g]=v[h]:delete v[g];for(d=k;d>k-r+e;d--)delete v[d-1]}else if(e>r)for(d=k-r;d>y;d--)h=d+r-1,g=d+e-1,h in v?v[g]=v[h]:delete v[g];for(d=0;d<e;d++)v[d+y]=arguments[d+2];return v.length=k-r+e,u}})},af89:function(t,o,e){}}]);
//# sourceMappingURL=chunk-33147a57.c4ddae57.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e3c6138"],{"05d4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",[a("b-row",[a("b-col",[a("h4",[e._v(" Cuotas y pagos de la cuenta N° "+e._s(this.numero_cuenta)+" ")]),a("br")])],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"num_cuenta",label:"Numero de cuenta","label-for":"num_cuenta"}},[a("b-form-input",{attrs:{id:"num_cuenta",type:"text",disabled:""},model:{value:this.numero_cuenta,callback:function(t){e.$set(this,"numero_cuenta",t)},expression:"this.numero_cuenta"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"importe",label:"Total","label-for":"importe"}},[a("b-form-input",{attrs:{id:"importe",disabled:""},model:{value:this.cuenta.importe,callback:function(t){e.$set(this.cuenta,"importe",t)},expression:"this.cuenta.importe"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"fecha",label:"Fecha","label-for":"fecha"}},[a("b-form-input",{attrs:{id:"gecha",type:"date",disabled:""},model:{value:this.cuenta.fecha,callback:function(t){e.$set(this.cuenta,"fecha",t)},expression:"this.cuenta.fecha"}})],1)],1),a("b-col",{attrs:{cols:"2"}},[a("b-button",{staticStyle:{margin:"10px"},attrs:{to:"cuentas"}},[a("b-icon",{attrs:{icon:"arrow-left-circle-fill"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"solicitante",label:"Solicitante","label-for":"solicitante"}},[a("b-form-input",{attrs:{id:"solicitante",type:"text",disabled:""},model:{value:e.cuenta.solicitante,callback:function(t){e.$set(e.cuenta,"solicitante",t)},expression:"cuenta.solicitante"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"garante",label:"Garante 1","label-for":"garante1"}},[a("b-form-input",{attrs:{id:"garante1",type:"text",disabled:""},model:{value:e.cuenta.garante1,callback:function(t){e.$set(e.cuenta,"garante1",t)},expression:"cuenta.garante1"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"garante2",label:"Garante 2","label-for":"garante2"}},[a("b-form-input",{attrs:{id:"garante2",type:"text",disabled:""},model:{value:e.cuenta.garante2,callback:function(t){e.$set(e.cuenta,"garante2",t)},expression:"cuenta.garante2"}})],1)],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"estado",label:"Estado","label-for":"estado"}},[a("b-form-input",{attrs:{id:"estado",type:"text",disabled:""},model:{value:e.cuenta.estado,callback:function(t){e.$set(e.cuenta,"estado",t)},expression:"cuenta.estado"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-group",{attrs:{id:"saldo",label:"Saldo","label-for":"saldo"}},[a("b-form-input",{attrs:{id:"saldo",type:"text",disabled:""},model:{value:e.cuenta.saldo,callback:function(t){e.$set(e.cuenta,"saldo",t)},expression:"cuenta.saldo"}})],1)],1),a("b-col",{attrs:{cols:"3"}},[a("b-button",{attrs:{id:"show-btn",variant:"danger"},on:{click:e.showModal}},[e._v("Refinanciar cuenta "),a("b-icon",{attrs:{icon:"credit-card"}})],1)],1)],1),a("b-col",[a("b-row",[a("b-col",[a("b-modal",{ref:"modal-refinanciar",attrs:{"hide-footer":"",title:"Refinanciar cuenta"}},[a("b-form-group",{attrs:{label:"Saldo pendiente"}},[a("b-form-input",{attrs:{disabled:""},model:{value:e.cuenta.saldo,callback:function(t){e.$set(e.cuenta,"saldo",t)},expression:"cuenta.saldo"}})],1),a("b-form-group",{attrs:{label:"Cantidad de cuotas"}},[a("b-form-input",{attrs:{placeholder:"Cuotas"},model:{value:e.datos_refinanciar.cant_cuotas,callback:function(t){e.$set(e.datos_refinanciar,"cant_cuotas",t)},expression:"datos_refinanciar.cant_cuotas"}})],1),a("b-form-group",{attrs:{label:"Fecha de vencimiento",type:"date"}},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"datepicker-refinanciar",locale:"es",placeholder:"Seleccione fecha","label-help":""},model:{value:e.datos_refinanciar.fecha_venc,callback:function(t){e.$set(e.datos_refinanciar,"fecha_venc",t)},expression:"datos_refinanciar.fecha_venc"}})],1),a("b-button",{staticClass:"mt-2",attrs:{variant:"outline-primary",block:"",disabled:e.disabled_refinanciar},on:{click:function(t){return e.refinanciar_cuenta()}}},[e._v("Refinanciar")])],1)],1),a("b-col")],1)],1)],1),a("b-container",{attrs:{id:"listado-cuotas"}},[a("h4",[e._v("LISTADO DE CUOTAS")]),a("b-table",{attrs:{striped:"",hover:"",items:e.cuotas,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.value.first)+" "+e._s(t.value.last)+" ")]}},{key:"cell(pagos)",fn:function(t){return[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return e.verpagos(t.item,t.index)}}},[a("b-icon",{attrs:{icon:"eye-fill"}})],1)]}}])})],1),a("b-modal",{ref:"modal-pagos",attrs:{id:"modal-pagos","hide-footer":"",title:e.titulo_modal},scopedSlots:e._u([{key:"modal-header",fn:function(t){var n=t.close;return[a("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return n()}}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]}}])},[a("b-container",[a("h4",[e._v("Nuevo pago para cuota "+e._s(this.cuota_actual.numero_cuota))]),a("b-row",{staticClass:"spacing"},[a("b-col",[a("b-form-input",{attrs:{id:"monto_pago",type:"number",disabled:e.cuotapagada,placeholder:"Ingrese el monto"},model:{value:e.nuevo_pago.monto,callback:function(t){e.$set(e.nuevo_pago,"monto",t)},expression:"nuevo_pago.monto"}})],1),a("b-col",[a("v-select",{attrs:{id:"metodo_id",options:e.metodos},model:{value:e.nuevo_pago.metodo,callback:function(t){e.$set(e.nuevo_pago,"metodo",t)},expression:"nuevo_pago.metodo"}})],1),a("b-col",{attrs:{lg:"2"}},[a("b-button",{attrs:{variant:"success",disabled:e.disabled_pagar,size:"sm"},on:{click:function(t){return e.validardatospago()}}},[e._v("Pagar")])],1)],1)],1),a("div",{staticClass:"d-block text-center"},[a("h5",[e._v("Pagos de esta cuota")]),a("b-table",{attrs:{striped:"",hover:"",items:e.pagos,fields:e.fields_pagos},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.value.first)+" "+e._s(t.value.last)+" ")]}}])})],1)],1)],1)},r=[],o=a("1da1"),c=(a("99af"),a("96cf"),a("709d")),s={name:"DetallePagos",components:{},data:function(){return{num_cuenta:"",saldo:0,total:0,garante:0,solicitante:0,cuotas_refinanciadas:0,excedente:0,pagos:null,fecha_refinanciada:"",show_excedente:!1,mensaje_excedente:"",hora:"",metodos:["Efectivo","T credito","T debito","Transferencia"],nuevo_pago:{monto:0,metodo:null},cuotapagada:!1,estado:0,titulo_modal:"",fields:[{key:"numero_cuota",label:"N°cuota",sortable:!0,sortDirection:"desc"},{key:"importe",label:"Importe",sortable:!0,class:"text-center"},{key:"fecha_vencimiento",label:"Vencimiento",sortable:!0,class:"text-center"},{key:"vencida",label:"Vencida",sortable:!0,class:"text-center"},{key:"recargo",label:"Recargo",sortable:!0,class:"text-center"},{key:"estado",label:"Estado",sortable:!0,class:"text-center"},{key:"saldo",label:"Saldo",sortable:!0,class:"text-center"},{key:"refinanciada",label:"Refinanciada",sortable:!0,class:"text-center"},{key:"pagos",label:"Pagos",sortable:!0,class:"text-center"},{key:"pagos",label:"Pagos"}],fields_pagos:[{key:"importe",label:"Importe",sortable:!0},{key:"metodo_pago",label:"Metodo de pago",sortable:!0},{key:"fecha",label:"Fecha",sortable:!0}],cuenta:{solicitante:"",importe:0,fecha:null,garante:"",saldo:0,estado:null},datos_refinanciar:{cant_cuotas:0,fecha_venc:null},cuotas:null,cuota_actual:{},saldo_cuota:0}},beforeCreate:function(){this.numero_cuenta=this.$route.query.num_cuenta,this.id_cuenta=this.$route.query.id_cuenta},refinanciar_cuenta:function(){},created:function(){this.getcuotas()},computed:{disabled_pagar:function(){var e=!0;return console.log("cuota actual",this.cuota_actual),0!=this.nuevo_pago.monto&&null!=this.nuevo_pago.metodo&&"SI"!=this.cuota_actual.refinanciada&&(e=!1),e},disabled_refinanciar:function(){var e=!0;return 0!=this.datos_refinanciar.cant_cuotas&&null!=this.datos_refinanciar.fecha_venc&&(e=!1),e}},mounted:function(){this.hora=new Date,console.log(this.cuota_actual)},methods:{getcuotas:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].cuotascuenta(e.numero_cuenta);case 2:a=t.sent,e.cuenta=a,e.cuotas=a.cuotas;case 5:case"end":return t.stop()}}),t)})))()},verpagos:function(e){this.cuota_actual=e,this.cuotapagada=e.pagada,this.saldo_cuota=e.saldo,this.nuevo_pago.monto=e.saldo,this.$refs["modal-pagos"].show(),this.titulo_modal="Cuota "+e.numero_cuota,this.pagos=e.pagos_cuotas},validardatospago:function(){var e=this;if(0==this.cuotapagada)if(this.nuevo_pago.monto<=0)this.$swal("El monto del pago debe ser mayor a 0","","warning");else if(this.nuevo_pago.monto>this.cuota_actual.saldo){var t=this.nuevo_pago.monto-this.cuota_actual.saldo;this.$swal({title:"Vas a pagar "+t+" mas del importe de esta cuota. La diferencia se descontara al saldo de la siguiente cuota",showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed?(e.excedente=t,e.nuevo_pago.monto=e.cuota_actual.saldo,e.realizarpago()):a.isDenied}))}else this.realizarpago();else this.$swal("CUOTA SALDADA")},showModal:function(){this.$refs["modal-refinanciar"].show()},hideModal:function(){this.$refs["modal-refinanciar"].hide()},realizarpago:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={metodo:e.nuevo_pago.metodo,monto:e.nuevo_pago.monto,numero_cuenta:e.numero_cuenta,id_cuenta:e.id_cuenta,numero_cuota:e.cuota_actual.numero_cuota,id_cuota:e.cuota_actual.id,excedente:e.excedente},t.prev=1,t.next=4,c["a"].nuevopago(a);case 4:n=t.sent,200==n.status&&(e.$swal("Bien hecho","Nuevo pago agregado","success"),r=n.pago,e.pagos.push(r),e.nuevo_pago={monto:0,metodo:null},e.excedente=0,e.getcuotas(),e.verpagos(e.cuota_actual),e.$bvModal.hide("modal-pagos")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$swal("Error",t.t0.message,"error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},refinanciar_cuenta:function(){var e=this;this.$swal({title:"Vas a refinanciar un saldo de ".concat(this.cuenta.saldo," en ").concat(this.datos_refinanciar.cant_cuotas," cuotas a partir de ").concat(this.datos_refinanciar.fecha_venc),showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed?e.confirmar_refinanciacion():t.isDenied}))},confirmar_refinanciacion:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("-------",e.datos_refinanciar),t.next=4,c["a"].refinanciar_cuenta(e.numero_cuenta,e.datos_refinanciar.cant_cuotas,e.datos_refinanciar.fecha_venc);case 4:a=t.sent,200==a.status&&(e.getcuotas(),e.$swal("Bien hecho","La cuenta ha sido refinanciada","success"),e.datos_refinanciar={cant_cuotas:0,fecha_venc:""},e.cuota_actual=null,e.nuevo_pago=null),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$swal("Algo salio mal",t.t0.message,"error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},u=s,i=(a("459c"),a("2877")),l=Object(i["a"])(u,n,r,!1,null,null,null);t["default"]=l.exports},"459c":function(e,t,a){"use strict";a("dd75")},"709d":function(e,t,a){"use strict";var n=a("1da1"),r=a("d4ec"),o=a("bee2"),c=(a("96cf"),a("bb36")),s=a("49c2"),u="cuentas/",i=new s["a"],l=function(){function e(){Object(r["a"])(this,e)}return Object(o["a"])(e,[{key:"getToken",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.getToken(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getheaders",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return t=e.sent,a={"Content-Type":"application/json",Authorization:"Bearer "+t.access},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCuentas",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u+"lista",e.next=3,this.getheaders();case 3:return a=e.sent,e.next=6,c["a"].get(t,{headers:a});case 6:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDetalleCuentas",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u+"detallescuenta",e.next=3,this.getheaders();case 3:return r=e.sent,o={numero_cuenta:t,dni_solicitante:a},e.next=7,c["a"].get(n,{params:o},{headers:r});case 7:return s=e.sent,e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"detalleCuentaCliente",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u+"detallecuentacliente",r={cliente:t,numero_cuenta:a},e.next=4,this.getheaders();case 4:return o=e.sent,e.next=7,c["a"].get(n,{params:r},{headers:o});case 7:return s=e.sent,e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getNumCuenta",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u+"numerocuenta",e.next=3,this.getheaders();case 3:return a=e.sent,e.next=6,c["a"].get(t,{headers:a});case 6:return n=e.sent,e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addcuenta",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getheaders();case 2:return a=e.sent,n=u+"registrarcuenta",e.next=6,c["a"].post(n,t,{headers:a});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updatecuenta",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getheaders();case 2:return n=e.sent,r=u+t+"/",e.next=6,c["a"].put(r,a,{headers:n});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"deletecuenta",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u+"lista"+t+"/",e.next=3,this.getheaders();case 3:return n=e.sent,e.next=6,c["a"].delete(a,{headers:n});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cuotascuenta",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u+"cuotascuenta",e.next=3,this.getheaders();case 3:return n=e.sent,r={num_cuenta:t},e.next=7,c["a"].get(a,{params:r},{headers:n});case 7:return o=e.sent,e.abrupt("return",o.data);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"refinanciar_cuenta",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=u+"refinanciarcuenta",e.next=3,this.getheaders();case 3:return o=e.sent,s={cuenta:t,cant_cuotas:a,fecha_venc:n},e.next=7,c["a"].post(r,s,{headers:o});case 7:return i=e.sent,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"nuevopago",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u+"nuevopago",e.next=3,this.getheaders();case 3:return n=e.sent,e.next=6,c["a"].post(a,t,{headers:n});case 6:return r=e.sent,e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new l},8418:function(e,t,a){"use strict";var n=a("c04e"),r=a("9bf2"),o=a("5c6c");e.exports=function(e,t,a){var c=n(t);c in e?r.f(e,c,o(0,a)):e[c]=a}},"99af":function(e,t,a){"use strict";var n=a("23e7"),r=a("d039"),o=a("e8b5"),c=a("861d"),s=a("7b0b"),u=a("50c4"),i=a("8418"),l=a("65f0"),d=a("1dde"),f=a("b622"),p=a("2d00"),h=f("isConcatSpreadable"),m=9007199254740991,b="Maximum allowed index exceeded",g=p>=51||!r((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=d("concat"),_=function(e){if(!c(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)},x=!g||!v;n({target:"Array",proto:!0,forced:x},{concat:function(e){var t,a,n,r,o,c=s(this),d=l(c,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?c:arguments[t],_(o)){if(r=u(o.length),f+r>m)throw TypeError(b);for(a=0;a<r;a++,f++)a in o&&i(d,f,o[a])}else{if(f>=m)throw TypeError(b);i(d,f++,o)}return d.length=f,d}})},dd75:function(e,t,a){}}]);
//# sourceMappingURL=chunk-8e3c6138.40200b8e.js.map